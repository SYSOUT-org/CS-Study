### 🌟CS Study - Database Lock
Lock

### 📅 Week
Week 2 of JAN

### 📚 Content



〰 들어가며...

> Lock의 기본 개념에 대해서 알아보고
> 데이터베이스에서의 락 기본 개념, 범위, 종류에 대해서 공부한다.
> 각 DBMS별 Lock의 사용에 대해서도 알아본다.

​

### 🤔 Lock이란?

> 멀티스레딩 환경에서 여러 스레드가 공유 자원에 동시에 접근하는 것을 방지하기 위한 메커니즘이다.

> 락은 자원을 사용하고 있는 스레드가 작업을 끝낼 때까지 다른 스레드가 그 자원에 접근하지 못하도록 "잠금"을 거는 방식으로 동작한다.

​
### 📌 Database에서의 Lock

> 여러 사용자가 동시에 DB에 접근하고 변경할 때

> 발생할 수 있는 데이터 불일치나 경합 상태를 방지하고,

> 데이터 일관성과 무결성을 유지하기 위한 방법으로 Lock을 사용한다.

​

### 📌 Lock의 설정 범위 (Level)


#### [ 데이터베이스 (Database) ]

- 가장 넓은 범위
- 1개의 세션만이 DB의 데이터에 접근, 수정 가능
- 데이터베이스 자체의 락 관리 수준


#### [ 세션 (Session) ]

- 데이터베이스 내 특정 세션에만 영향
- 트랜잭션 내에서 작업 수행, 세션 단위로 락이 적용
- 파일 수준의 락을 사용 가능

#### [ 트랜잭션 (Transaction) ]

- 세션 내의 트랜잭션 작업 단위에 맞추어 데이터를 잠그는 방식
- 트랜잭션 내의 데이터 일관성을 보장하기 위해 사용
- 트랜잭션이 끝나면 락이 해제


#### [ 파일 (File) ]

- 데이터베이스 파일에 대한 락이 걸림
- 해당 파일 내 모든 데이터(테이블, Row 등) 영향
- 물리적 저장소를 기준으로 락을 걸어, 성능이나 동시성에 큰 영향

#### [ 테이블 (Table) ]

- 테이블 수준의 Lock 설정
- 테이블의 모든 행을 잠금 (전체 테이블에 영향을 주는 변경을 수행할 때 유용함)
- 테이블 내에서 전체 데이터를 수정하는 DDL 작업에 적합



</br>

###### ↑ 넓은 범위

---

###### ↓ 좁은 범위

​

#### [ 페이지와 블록 (Page & Block) ]

- 페이지와 블록은 파일 내에서 여러 행이 포함된 물리적 저장 단위
- 한번에 여러 행을 잠글 수 있음
- 성능 최적화에 유리, 세분화된 제어 제공


#### [ 컬럼 (Column) ]

- Lock 설정 및 해제 리소스가 많이 들기 때문에, 일반적으로 사용되지 않는 방식
  ​

#### [ 행 (Row) ]

- 1개의 행를 기준으로 Lock 설정
- 가장 세밀한 제어
- DML 작업에 일반적으로 사용됨
- 다른 트랜잭션이 다른 행을 처리할 수 있도록 높은 동시성 제공
- 가장 일반적으로 사용하는 Lock
  ​

### 📌 Lock 종류
​
- 공유 락 (Shared Lock)
- 베타 락 (Exclusive Lock)
- 업데이트 락 (Update Lock)
- 내재 락 (Intent Lock)

​
### 📌 DBMS별 Lock 기법

​
![image](https://github.com/user-attachments/assets/c778a6cd-fea8-43d7-adfd-dba1783eca77)

