# ğŸš© íŠ¸ëœì­ì…˜
- DBMSì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë…¼ë¦¬ì ì¸ ì‘ì—… ë‹¨ìœ„
- ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ê¸° ìœ„í•´ì„œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—… ë‹¨ìœ„
    - ì´ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¨ë‹¤ëŠ” ê²ƒì€ <u>ì§ˆì˜ì–´(SQL)ì„ ì´ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì ‘ê·¼í•˜ëŠ” ê²ƒ</u>ì„ ì˜ë¯¸
    ex) ``SELECT``, ``INSERT``, ``DELETE``, ``UPDATE``

<br>

**íŠ¸ëœì­ì…˜ì„ ì •ì˜í•˜ëŠ” ì´ìœ **  <br>  1. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì´ ë™ì‹œì— ê°™ì€ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ, **íŠ¸ëœì­ì…˜**ì´ **ì„œë¡œ ë¶„ë¦¬í•˜ëŠ” ë‹¨ìœ„**ê°€ ë¨  
2. ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ, **ì¥ì• ê°€ ë°œìƒ**í•˜ë©´ **íŠ¸ëœì­ì…˜**ì´ **ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„**ê°€ ë¨


## ğŸ“Œ MySQL íŠ¸ëœì­ì…˜ ì œì–´ ëª…ë ¹ì–´
- ``ì»¤ë°‹(Commit)``
    - ëª¨ë“  ë¶€ë¶„ ì‘ì—…ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ **ë³€ê²½ì‚¬í•­ì„ í•œêº¼ë²ˆì— DBì— ë°˜ì˜**
- ``ë¡¤ë°±(Rollback)``
    - ë¶€ë¶„ ì‘ì—…ì´ ì‹¤íŒ¨í•˜ë©´ íŠ¸ëœì­ì…˜ ì‹¤í–‰ ì „ìœ¼ë¡œ ë˜ëŒë¦¼  
    -  í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì´ ì²˜ë¦¬ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì–´ <u>ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¼ê´€ì„±ì„ ê¹¨ëœ¨ë ¸ì„ ë•Œ</u>, íŠ¸ëœì­ì…˜ì˜ ì¼ë¶€ê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆë”ë¼ë„ íŠ¸ëœì­ì…˜ì˜ ``ì›ìì„±``ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ **ì´ íŠ¸ëœì­ì…˜ì´ í–‰í•œ ëª¨ë“  ì—°ì‚°ì„ ì·¨ì†Œí•˜ëŠ” ì—°ì‚°**
    - ì¼ë°˜ì ìœ¼ë¡œ ``Rollback``ì„ ëª…ì‹œí•˜ë©´ ``INSERT, DELETE, UPDATE``ë“±ì˜ **ì‘ì—… ì „ì²´ê°€ ì·¨ì†Œ**   
    ğŸ‘‰ğŸ» ì´ë•Œ ëª¨ë“  ì—°ì‚°ì„ ì·¨ì†Œí•˜ì§€ ì•Šê³  <u>ì •í•´ì§„ ë¶€ë¶„ê¹Œì§€ë§Œ ë˜ëŒë¦¬ê³  ì‹¶ì„ ë•Œ</u> ``SavePoint`` ì‚¬ìš© 
        - ì „ì²´ê°€ ì•„ë‹Œ **íŠ¹ì • ë¶€ë¶„ì—ì„œ íŠ¸ëœì­ì…˜ ì·¨ì†Œ** ê°€ëŠ¥


## ğŸ“Œ íŠ¸ëœì­ì…˜ì˜ íŠ¹ì§• 
- **``Atomicity(ì›ìì„±)``**   
ğŸ‘‰ğŸ» DBMSëŠ” ì›ìì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ íšŒë³µ ê´€ë¦¬ì í”„ë¡œê·¸ë¨ì„ ì‘ë™ì‹œí‚´
    - íŠ¸ëœì­ì…˜ì´ ì›ìì²˜ëŸ¼ ë” ì´ìƒ ìª¼ê°œì§€ì§€ ì•ŠëŠ” **í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ ë‹¨ìœ„ë¡œ ë™ì‘í•´ì•¼ í•œë‹¤**
    - íŠ¸ëœì­ì…˜ì— í¬í•¨ëœ ì‘ì—…ì€ **ì „ë¶€ ìˆ˜í–‰**ë˜ê±°ë‚˜ ì•„ë‹ˆë©´ **ì „ë¶€ ìˆ˜í–‰ë˜ì§€ ì•Šì•„ì•¼ í•¨** (All or Nothing)
- **``Consistency(ì¼ê´€ì„±)``**   
ğŸ‘‰ğŸ» DBMSëŠ” ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì„ í™œìš©í•¨
    - íŠ¸ëœì­ì…˜ì„ ìˆ˜í–‰í•˜ê¸° ì „ì´ë‚˜ ìˆ˜í–‰í•œ í›„ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ëŠ” **í•­ìƒ ì¼ê´€ëœ ìƒíƒœë¥¼ ìœ ì§€**í•´ì•¼ í•¨
- **``Isolation(ê³ ë¦½ì„±)``**   
ğŸ‘‰ğŸ» DBMSëŠ” ê³ ë¦½ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ë™ì‹œì„± ì œì–´ ì•Œê³ ë¦¬ì¦˜ì„ ì‘ë™ì‹œí‚´
    - ìˆ˜í–‰ì¤‘ì¸ íŠ¸ëœì­ì…˜ì— ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ë¼ì–´ë“¤ì–´ **ë³€ê²½ ì¤‘ì¸ ë°ì´í„° ê°’ì„ í›¼ì†í•˜ëŠ” ì¼ì´ ì—†ì–´ì•¼ í•¨**
    - ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê³µìœ ê°€ ëª©ì ì´ë¯€ë¡œ, *ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ìˆ˜í–‰*ë˜ëŠ”ë°, ì´ë•Œ **ê°™ì€ ë°ì´í„°ë¥¼ ë™ì‹œì— ì½ê³  ì“¸ ê²½ìš°** ë³€ê²½ì¤‘ì¸ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ **ì¼ê´€ì„±ì´ í›¼ì†** â¡ï¸ ì´ë•Œ ë™ì‹œì— ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ í•´ì•¼í•˜ëŠ” **ë™ì‹œì„± ì œì–´**ê°€ í•„ìš”
- **``Durability(ì˜êµ¬ì„±)``**   
ğŸ‘‰ğŸ» DBMSëŠ” ì§€ì†ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ íšŒë³µ ê´€ë¦¬ì í”„ë¡œê·¸ë¨ì„ ì´ìš©í•¨
    - ìˆ˜í–‰ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•œ íŠ¸ëœì­ì…˜ì€ **ë³€ê²½í•œ ë°ì´í„°ë¥¼ ì˜êµ¬íˆ ì €ì¥í•´ì•¼ í•¨**
    - íŠ¸ëœì­ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œ(commit) í˜¹ì€ ë¶€ë¶„ì™„ë£Œ(partial commit)í•œ ë°ì´í„°ëŠ” DBMSê°€ ì±…ì„ì§€ê³ , ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œê·¸ íŒŒì¼ì„ ê¸°ë¡ë˜ì–´ì•¼ í•¨ â¡ï¸ ì´ê²Œ ì§€ì†ì„±

## ğŸ“Œ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ 

| ê³ ë¦½ ìˆ˜ì¤€         | ë¬¸ì œ            | ì˜¤ì† ì½ê¸°       | ë°˜ë³µë¶ˆê°€ëŠ¥ ì½ê¸° | ìœ ë ¹ ë°ì´í„° ì½ê¸° |
|-------------------|----------------|----------------|----------------|----------------|
| READ UNCOMMITTED | (level = 0)    | ë°œìƒ ê°€ëŠ¥      | ë°œìƒ ê°€ëŠ¥      | ë°œìƒ ê°€ëŠ¥      |
| READ COMMITTED   | (level = 1)    | ë¶ˆê°€ëŠ¥         | ë°œìƒ ê°€ëŠ¥      | ë°œìƒ ê°€ëŠ¥      |
| REPEATABLE READ  | (level = 2)    | ë¶ˆê°€ëŠ¥         | ë¶ˆê°€ëŠ¥         | ë°œìƒ ê°€ëŠ¥      |
| SERIALIZABLE     | (level = 3)    | ë¶ˆê°€ëŠ¥         | ë¶ˆê°€ëŠ¥         | ë¶ˆê°€ëŠ¥         |

> **ì˜¤ì† ì“°ê¸° (Dirty Write)** 
: ê°™ì€ ë°ì´í„°ì— ëŒ€í•´ ë™ì‹œì— ë‘ ê°œ ì´ìƒì˜ íŠ¸ëœì­ì…˜ì´ ê°’ì„ ë°”ê¾¸ê³ ì í•  ë•Œ ë°œìƒë˜ëŠ” í˜„ìƒ

> **ì˜¤ì† ì½ê¸° (Dirty read)** = ë¹„ì™„ë£Œ ì˜ì¡´ì„± (Uncommitted Dependency) 
: ì•„ì§ ì¢…ë£Œ(commit)ë˜ì§€ ì•Šì€ íŠ¸ëœì­ì…˜ì˜ ì“°ê¸° ë‚´ìš©ì„ ì½ëŠ” ê²ƒìœ¼ë¡œ ë¹„ì •ìƒì  ìƒíƒœì˜ ë°ì´í„°ë¥¼ ì½ê²Œ ë˜ëŠ” í˜„ìƒ
ex) ì½ê¸° ì‘ì—…ì„ í•˜ëŠ” íŠ¸ëœì­ì…˜ T1ì´ ì“°ê¸° ì‘ì—…ì„ í•˜ëŠ” íŠ¸ëœì­ì…˜ T2ê°€ ì‘ì—…í•œ ì¤‘ê°„ì— ë°ì´í„°ë¥¼ ì½ìœ¼ë¯€ë¡œ ë°œìƒ â†’ ì‘ì—… ì¤‘ì¸ íŠ¸ëœì­ì…˜ T2ê°€ ì‘ì—…ì„ ì² íšŒí•  ê²½ìš°,  íŠ¸ëœì­ì…˜ T1ì€ ë¬´íš¨ê°€ ëœ ë°ì´í„°ë¥¼ ì½ê²Œ ë˜ê³  ì˜ëª»ëœ ê²°ê³¼ë¥¼ ë„ì¶œ

> **ë°˜ë³µ ë¶ˆê°€ëŠ¥ ì½ê¸° (Non-Repeatable Read)** : ì–´ë–¤ íŠ¸ëœì­ì…˜ì—ì„œ ë™ì¼í•œ ë°ì´í„°ì˜ ê°’ì„ ë§¤ë²ˆ ì½ì„ ë•Œ ë§ˆë‹¤ í‹€ë ¤ì§€ëŠ” í˜„ìƒ
ex) íŠ¸ëœì­ì…˜ T1ì´ ë°ì´í„°ë¥¼ ì½ê³  ì‘ì—…í•˜ë˜ ì¤‘ íŠ¸ëœì­ì…˜ T2ê°€ ë°ì´í„°ë¥¼ ë³€ê²½í•¨ â†’ ì´ë•Œ T1ì€ ë³€ê²½í•œ ë°ì´í„°ë¥¼ ë³´ê³  ë‹¤ì‹œ í•œ ë²ˆ ì‘ì—…ì„ í•¨ â†’ T1 ì…ì¥ì—ì„œëŠ” ê°™ì€ SQLë¬¸ì´ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ë„ì¶œí•¨

> **ìœ ë ¹ ì½ê¸° (Phantom Read)** : ê¸°ì¡´ ë°ì´í„°ëŠ” ë™ì¼í•œë° ìƒˆë¡œ ì¶”ê°€ëœ ê°’ì— ì˜í•´ ë°ì´í„° ê°’ì´ ë³€ê²½ë˜ëŠ” í˜„ìƒ 
ex) íŠ¸ëœì­ì…˜ T1ì´ ë°ì´í„°ë¥¼ ì½ê³  ë‚˜ì„œ íŠ¸ëœì­ì…˜ T2ê°€ ë°ì´í„°ë¥¼ ìƒˆë¡œ ì‚½ì…í•˜ë©´, íŠ¸ëœì­ì…˜ T1ì´ ë‹¤ì‹œ í•œë²ˆ ë°ì´í„°ë¥¼ ì½ì„ë•Œ ì´ì „ì— ì—†ë˜ ë°ì´í„°ê°€ ë‚˜íƒ€ë‚¨

### âœ”ï¸ **Read Uncommitted**
- ê³ ë¦½ ìˆ˜ì¤€ì´ ê°€ì¥ ë‚®ì€ ëª…ë ¹ì–´ë¡œ, ìì‹ ì˜ ë°ì´í„°ì— ì•„ë¬´ëŸ° ê³µìœ  ë½ì„ ê±¸ì§€ ì•ŠìŒ  
*(ë°°íƒ€ë½ì€ ê°±ì‹  ì†ì‹¤ ë¬¸ì œ ë•Œë¬¸ì— ê±¸ì–´ì•¼ í•¨)*   
SELECT - ê³µìœ ë½ ê±¸ì§€ ì•ŠìŒ / UPDATE - ë°°íƒ€ë½  
**â‡’ ë‹¤ë¥¸ íŠ¸ë™ì­ì…˜ì— ê³µìœ ë½ê³¼ ë°°íƒ€ë½ì´ ê±¸ë¦° ë°ì´í„°ë¥¼ ëŒ€ê¸°í•˜ì§€ ì•Šê³  ì½ìŒ**
- ì‹¬ì§€ì–´ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ COMMITí•˜ì§€ ì•Šì€ ë°ì´í„°ë„ ì½ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, **ì˜¤ì† ë°ì´í„° ì½ê¸°** = SELECT ì§ˆì˜ì˜ ëŒ€ìƒì´ ë˜ëŠ” í…Œì´ë¸”ì— ëŒ€í•´ì„œ ë½ì„ ì„¤ì •í•˜ì§€ ì•Šì€ ê²ƒê³¼ ê°™ìŒ (NO LOCK)
- ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë‚´ìš©ì— ì ‘ê·¼ ê°€ëŠ¥Â **(Dirty Read)**
- `ì˜¤ì† ì½ê¸°, ë°˜ë³µ ë¶ˆê°€ëŠ¥ ì½ê¸°, ìœ ë ¹ ë°ì´í„° ì½ê¸°`

### âœ”ï¸ **Read Committed**
- ì˜¤ì† í˜ì´ì§€ì˜ ì°¸ì¡°ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ìì‹ ì˜ ë°ì´í„°ë¥¼ ì½ëŠ” ë™ì•ˆ ê³µìœ ë½ì„ ê±¸ì§€ë§Œ, 
íŠ¸ëœì­ì…˜ì´ ëë‚˜ê¸° ì „ì—ë¼ë„ í•´ì§€ ê°€ëŠ¥ 
SELECT - ê³µìœ ë½ì„ ê±¸ê³  ëë‚˜ë©´ ë°”ë¡œ í•´ì§€ / UPDATE - ë°°íƒ€ë½ ì„¤ì •
**â‡’ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì„¤ì •í•œ ê³µìœ ë½ì€ ì½ì§€ë§Œ ë°°íƒ€ë½ì€ ì½ì§€ ëª»í•¨**
- ì»¤ë°‹ëœ ë‚´ìš©ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- í•œ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ê²€ìƒ‰ ê²°ê³¼ê°€ ë¹„ì¼ê´€ì ì¸ í˜„ìƒ ë°œìƒÂ **(Nonrepeatable read)**
- `ë°˜ë³µ ë¶ˆê°€ëŠ¥ ì½ê¸°, ìœ ë ¹ ë°ì´í„° ì½ê¸°`

### âœ”ï¸ **Repeatable Read**
- ìì‹ ì˜ ë°ì´í„°ì— ì„¤ì •ëœ ê³µìœ ë½ê³¼ ë°°íƒ€ë½ì„ íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œí•  ë•Œê¹Œì§€ ìœ ì§€í•˜ì—¬ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ìì‹ ì˜ ë°ì´í„°ë¥¼ ê°±ì‹ (UPDATE)í•  ìˆ˜ ì—†ë„ë¡ í•¨ 
(ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ ë°ì´í„°ëŠ” ë½ í˜¸í™˜ì„± ê·œì¹™ì— ë”°ë¼ ì§„í–‰ â‡’ ë‹¤ë¥¸ ê³ ë¦½í™” ìˆ˜ì¤€ì— ë¹„í•´ ë°ì´í„°ì˜ ë™ì‹œì„±ì´ ë‚®ì•„ íŠ¹ë³„í•˜ì§€ ì•Šì€ ìƒí™©ì´ë¼ë©´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤)
SELECT - ê³µìœ ë½ì„ ê±¸ê³  íŠ¸ëœì­ì…˜ì„ ëê¹Œì§€ ìœ ì§€ / UPDATE - ë°°íƒ€ë½ ì„¤ì •
**â‡’ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì„¤ì •í•œ ê³µìœ ë½ì€ ì½ì§€ë§Œ ë°°íƒ€ë½ì€ ì½ì§€ ëª»í•¨**
- ì»¤ë°‹ì´ ì™„ë£Œëœ ë°ì´í„°ë§Œ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, íŠ¸ëœì­ì…˜ ë²”ìœ„ ë‚´ì—ì„œ ì¡°íšŒí•œ ë‚´ìš©ì´ í•­ìƒ ë™ì¼í•¨ì„ ë³´ì¥
- **ì¼ì •ë²”ìœ„ì˜ ë ˆì½”ë“œë¥¼ ë‘ë²ˆ ì´ìƒ ì½ì„ ë•Œ, ì²« ë²ˆì¬ ì¿¼ë¦¬ì—ì„œ ì—†ë˜ ìœ ë ¹ ë ˆì½”ë“œê°€ ë‘ë²ˆì§¸ ì¿¼ë¦¬ì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” í˜„ìƒì„ Phantom read** `ìœ ë ¹ ë°ì´í„° ì½ê¸°`

### âœ”ï¸ **Serializable**
- ê³ ë¦½ ìˆ˜ì¤€ì´ ê°€ì¥ ë†’ì€ ëª…ë ¹ì–´ë¡œ, ì‹¤í–‰ ì¤‘ì¸ íŠ¸ëœì­ì…˜ì€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ìœ¼ë¡œë¶€í„° ì™„ë²½í•˜ê²Œ ë¶„ë¦¬
SELECT - ê³µìœ ë½ì„ ê±¸ê³  íŠ¸ëœì­ì…˜ì„ ëê¹Œì§€ ìœ ì§€ / UPDATE - ë°°íƒ€ë½ ì„¤ì • / ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì— ì„¤ì •í•œ ê³µìœ ë½ì€ ì½ì§€ë§Œ ë°°íƒ€ë½ì€ ì½ì§€ ëª»í•¨ 
    **â‡’ ì¸ë±ìŠ¤ ê³µìœ ë½ì„ ì„¤ì •í•˜ì—¬ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì˜ INSERT ë¬¸ì´ ê¸ˆì§€ë¨**
- í•œ íŠ¸ëœì­ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ëŠ” ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì ‘ê·¼ ë¶ˆê°€ëŠ¥

## ğŸ“Œ ì‚¬ìš© ì½”ë“œ
ğŸ‘‰ğŸ» **Transactional ì‚¬ìš©í•œ INSERT**
```java
    @Transactional
    public void createProduct(String name, Long price) {
        Product product = Product.builder()
                .name(name)
                .price(price)
                .build();

        productJpaRepository.save(product);

        if (price > 1000) {
            throw new RuntimeException("Price Exception - Rollback");
        }
    }
```
- í•´ë‹¹ ì„œë¹„ìŠ¤ ë‹¨ì„ í˜¸ì¶œ í–ˆì„ ë•Œ, ``price=500``ì¸ ê²½ìš°ì—ëŠ” ì •ìƒì ìœ¼ë¡œ Insert
- í•˜ì§€ë§Œ ``pirce=2000``ì¸ ì˜ˆì™¸ ìƒí™©ì—ì„œëŠ” Insert í›„ Rollbackì‹œì¼œì„œ DBì— ë°˜ì˜ì´ ì•ˆë˜ëŠ” ê²ƒì„ í™•ì¸ ê°€ëŠ¥

```
Hibernate: insert into product (name,price) values (?,?)
Successfully Saved 
Hibernate: insert into product (name,price) values (?,?)
Price Exception - Rollback
```

ğŸ‘‰ğŸ» **Transactional ì‚¬ìš©í•˜ì§€ ì•Šì€ INSERT**
```java
    public void createProductByNonTransaction(String name, Long price) {
        Product product = Product.builder()
                .name(name)
                .price(price)
                .build();

        productJpaRepository.save(product);

        if (price > 1000) {
            throw new RuntimeException("Price Exception - Rollback");
        }
    }
```
- í•´ë‹¹ ì„œë¹„ìŠ¤ ë‹¨ì„ í˜¸ì¶œ í–ˆì„ë•Œ ``pirce=2000``ì¸ ì˜ˆì™¸ ìƒí™©ì—ì„œëŠ” Insert í›„ Rollbackì‹œì¼œí‚¤ì§€ ëª»í•˜ê³  DBì— ë°”ë¡œ ë°˜ì˜ë¨

```
Hibernate: insert into product (name,price) values (?,?)
2025-01-02T13:50:07.947+09:00 ERROR 26280 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: Price Exception - Rollback] with root cause

java.lang.RuntimeException: Price Exception - Rollback
```

ğŸ‘‰ğŸ» **Transactional(readOnly=true)ì¸ ê²½ìš°, ì“°ê¸° ì‹œë„**
```java
    @Transactional(readOnly = true)
    public ProductResp readProduct(Long id) {
        return ProductResp.builder()
                .name(productJpaRepository.findById(id).orElseGet(null).getName())
                .build();
    }

    @Transactional(readOnly = true)
    public void readProductWithInsert() {
        Product product = Product.builder()
                .name("test")
                .price(200L)
                .build();

        productJpaRepository.save(product);
    }
```
- í•´ë‹¹ ì„œë¹„ìŠ¤ ë‹¨ì—ì„œ readProductë¥¼ í˜¸ì¶œí•˜ë©´, ì •ìƒì ìœ¼ë¡œ ë°ì´í„°ë¥¼ SELECT
- í•˜ì§€ë§Œ, readProductWithInsertë¥¼ í˜¸ì¶œí•˜ë©´, readOnlyì¸ Transactionì—ì„œ INSERTë¥¼ ì‹œë„í•˜ë¯€ë¡œ ì˜ˆì™¸ ë°œìƒ 
```
Hibernate: select p1_0.id,p1_0.name,p1_0.price from product p1_0 where p1_0.id=?
Hibernate: insert into product (name,price) values (?,?)
2025-01-02T13:57:00.942+09:00  WARN 18816 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: S1009
2025-01-02T13:57:00.943+09:00 ERROR 18816 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Connection is read-only. Queries leading to data modification are not allowed
2025-01-02T13:57:00.958+09:00 ERROR 18816 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: could not execute statement [Connection is read-only. Queries leading to data modification are not allowed] [insert into product (name,price) values (?,?)]] with root cause

java.sql.SQLException: Connection is read-only. Queries leading to data modification are not allowed
```