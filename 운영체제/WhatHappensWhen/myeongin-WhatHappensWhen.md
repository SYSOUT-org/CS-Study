## 사용자가 `www.google.com`을 입력하면 발생하는 과정

사용자가 `www.google.com`을 입력하면, 브라우저는 **HTTP 프로토콜**을 사용해 구글 웹 서버와 통신하려고 합니다. HTTP는 **OSI 7계층 중 애플리케이션 계층**에서 동작하는 프로토콜입니다.

---

### 1. DNS 질의 (Domain Name System)
브라우저는 요청한 도메인 이름(`www.google.com`)에 대한 **IP 주소**를 알아야 하기 때문에 **DNS 서버**에 질의합니다.  
이 질의 과정 또한 **애플리케이션 계층(7계층)**에서 이루어지며, DNS 서버는 해당 도메인에 대한 IP 주소(예: `142.250.190.78`)를 응답합니다.

---

### 2. TCP 3-Way Handshake (연결 설정)
IP 주소를 얻은 후, 브라우저는 **구글 서버와 통신**을 시작합니다.  
HTTP는 **TCP/IP 기반**으로 작동하므로, 데이터를 주고받기 전에 **TCP 3-Way Handshake** 과정이 필요합니다.  
이 단계는 **전송 계층(4계층)**에서 이루어집니다.

- **SYN**: 클라이언트 → 서버 (연결 요청)
- **SYN + ACK**: 서버 → 클라이언트 (연결 수락)
- **ACK**: 클라이언트 → 서버 (연결 확인)

---

### 3. HTTP 요청 (Request)
TCP 연결이 성립된 후, 브라우저는 **HTTP Request 메시지**를 생성하여 구글 서버에 보냅니다.  
예를 들어, 브라우저는 다음과 같은 요청을 **TCP 프로토콜**을 통해 **80번 포트**로 전송합니다.

```
GET / HTTP/1.1
Host: www.google.com
```

이때 데이터는 **패킷(Packet)** 형태로 네트워크를 통해 전달됩니다.  
패킷이 전송될 때 **각 OSI 계층에서의 역할**은 다음과 같습니다.

- **네트워크 계층(3계층)**: IP 주소를 사용하여 목적지 설정
- **데이터 링크 계층(2계층)**: MAC 주소를 사용하여 패킷 전달

---

### 4. HTTP 응답 (Response)
구글 서버는 클라이언트의 요청을 수신하고 이를 처리한 후, **HTTP Response 메시지**를 생성하여 응답합니다.  
응답에는 **상태 코드(Status Code)**와 함께 웹 페이지 데이터가 포함됩니다.

```
HTTP/1.1 200 OK
Content-Type: text/html
```

브라우저는 이 응답을 받아 **HTML, CSS, JavaScript** 등의 데이터를 해석하여 화면에 페이지를 렌더링합니다.

---

### 5. TCP 4-Way Handshake (연결 종료)
모든 데이터 전송이 완료되면, 클라이언트와 서버는 **TCP 4-Way Handshake** 과정을 거쳐 연결을 종료합니다.

- **FIN**: 클라이언트 → 서버 (연결 종료 요청)
- **ACK**: 서버 → 클라이언트 (요청 확인)
- **FIN**: 서버 → 클라이언트 (연결 종료 요청)
- **ACK**: 클라이언트 → 서버 (요청 확인, 연결 종료)

이로써 클라이언트와 서버 간의 세션이 종료됩니다.

